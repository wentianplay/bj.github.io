<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã€Šå½¬ã€‹ã€Šå¤©å½¬ã€‹ç®€æ˜“ä¿®ä»™ä¼  -æ–‡å¤©ç©WenTianPlay -æ–‡å¤©ç©ç½‘ç»œç§‘æŠ€æœ‰é™å…¬å¸</title>
    <style>
        body {
            font-family: "æ¥·ä½“", cursive;
            background-color: #2c2c2c;
            color: #e0e0e0;
            margin: 0;
            padding: 20px;
        }
        #game {
            max-width: 600px;
            margin: 0 auto;
            border: 2px solid #4a4a4a;
            padding: 20px;
            border-radius: 10px;
            background: #1a1a1a;
        }
        .button {
            margin: 10px 5px;
            padding: 12px 24px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .button:hover {
            background-color: #45a049;
            transform: scale(1.05);
        }
        .realm-info {
            font-size: 1.2em;
            margin: 15px 0;
            padding: 10px;
            background: #2a2a2a;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div id="game">
        <h1 style="text-align: center; color: #4CAF50;">å¤©å½¬ä¸–ç•Œ</h1>
        
        <div class="realm-info">
            <h2>ä½ çš„å¢ƒç•Œ: <span id="playerLevel">ç‚¼æ°”ä¸€å±‚</span></h2>
            <h2>å¯¹æ‰‹å¢ƒç•Œ: <span id="enemyLevel">ç‚¼æ°”ä¸€å±‚</span></h2>
        </div>

        <div style="text-align: center;">
            <button class="button" id="attackButton">å‘èµ·æŒ‘æˆ˜</button>
            <button class="button" id="restartButton">è½®å›é‡ä¿®</button>
            <button class="button" id="saveButton">é—­å…³å­˜æª”</button>
        </div>
    </div>

    <script>
        const cultivationRealms = [
            { name: 'å‡¡äºº', levels: 3 },
            { name: 'ç‚¼æ°”', levels: 9 },
            { name: 'ç­‘åŸº', levels: 3 },
            { name: 'é‡‘ä¸¹', levels: 3 },
            { name: 'å…ƒå©´', levels: 3 },
            { name: 'åŒ–ç¥', levels: 3 },
            { name: 'åˆä½“', levels: 3 },
            { name: 'å¤§ä¹˜', levels: 3 },
            { name: 'æ¸¡åŠ«', levels: 9 },
            { name: 'çœŸä»™', levels: Infinity }
        ];

        let playerLevel = 4;  // åˆå§‹ä¸ºç‚¼æ°”ä¸€å±‚ï¼ˆå‡¡äºº3å±‚+1ï¼‰
        let enemyLevel = 4;

        function getRealmInfo(level) {
            let accumulated = 0;
            for (const realm of cultivationRealms) {
                const realmLimit = accumulated + realm.levels;
                if (level <= realmLimit || realm.levels === Infinity) {
                    return {
                        name: realm.name,
                        layer: Math.min(level - accumulated, realm.levels),
                        isMax: realm.levels === Infinity
                    };
                }
                accumulated += realm.levels;
            }
            return { name: 'æœªçŸ¥', layer: 0 };
        }

        function updateDisplay() {
            const player = getRealmInfo(playerLevel);
            const enemy = getRealmInfo(enemyLevel);
            
            let playerText = player.isMax ? 
                `${player.name}ï¼ˆ${player.layer}é‡å¤©ï¼‰` : 
                `${player.name} ${player.layer}å±‚`;
            
            let enemyText = enemy.isMax ? 
                `${enemy.name}ï¼ˆ${enemy.layer}é‡å¤©ï¼‰` : 
                `${enemy.name} ${enemy.layer}å±‚`;

            document.getElementById('playerLevel').textContent = playerText;
            document.getElementById('enemyLevel').textContent = enemyText;
        }

        function challenge() {
            const successChance = playerLevel / (playerLevel + enemyLevel);
            if (Math.random() < successChance) {
                playerLevel += Math.ceil(enemyLevel * 0.2);
                enemyLevel = Math.floor(playerLevel * (1 + Math.random()));
                alert("âœ¨ çªç ´æˆåŠŸï¼å¸æ”¶å¯¹æ‰‹ä¿®ä¸ºç²¾è¿›ï¼");
            } else {
                playerLevel = Math.max(1, playerLevel - 1);
                alert("ğŸ’¥ æ¸¡åŠ«å¤±è´¥ï¼ä¿®ä¸ºå—æŸï¼");
            }
            updateDisplay();
        }

        function restart() {
            playerLevel = 4;
            enemyLevel = 4;
            updateDisplay();
            alert("ãŠ™ï¸ å…µè§£è½¬ä¸–ï¼Œé‡å…¥è½®å›ï¼");
        }

        function saveProgress() {
            localStorage.setItem('playerCultivation', playerLevel);
            localStorage.setItem('enemyCultivation', enemyLevel);
            alert("ğŸ’¾ å°†å½“å‰ä¿®ä¸ºå°å…¥ç‰ç®€ï¼");
        }

        function loadProgress() {
            const savedPlayer = localStorage.getItem('playerCultivation');
            const savedEnemy = localStorage.getItem('enemyCultivation');
            if (savedPlayer) playerLevel = parseInt(savedPlayer);
            if (savedEnemy) enemyLevel = parseInt(savedEnemy);
            updateDisplay();
        }

        // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬
        document.getElementById('attackButton').addEventListener('click', challenge);
        document.getElementById('restartButton').addEventListener('click', restart);
        document.getElementById('saveButton').addEventListener('click', saveProgress);

        // åŠ è½½å­˜æ¡£
        window.addEventListener('load', loadProgress);
    </script>
</body>
</html>
